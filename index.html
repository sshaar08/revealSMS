<!doctype html>
<html lang="en">

    <head>
        <meta charset="utf-8">

        <title>Selenium and Fabric @ AI</title>

        <meta name="description" content="Continuous integration and Fabric">
        <meta name="author" content="Arthur Hinds and Sammy Cray">

        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/default.css" id="theme">

        <!-- For syntax highlighting -->
        <link rel="stylesheet" href="lib/css/zenburn.css">

        <!-- If the query includes 'print-pdf', use the PDF print sheet -->
        <script>
            document.write( '<link rel="stylesheet" href="css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );
        </script>

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->
    </head>

    <body>

        <div class="reveal">

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class="slides">
                <section>
                    <section>
                        <h2>QA: Quality Assurance</h2>
                        <img src="img/qastamp.jpg" alt="Traditional">
                          <aside class="notes">
                                <ul>
                                    <li></li>
                                    <li></li>
                                </ul>
                            </aside>
                    </section>
                    <section>
                        <h2>QA</h2>
                        <ul>
                            <li>Specs</li>
                            <li>Tests</li>
                            <li>Reports</li>
                        </ul>
                    </section>
                    <section>
                        <h2>QA Automation</h2>
                        
                        <img src="img/qaRobot.png" alt="pumpkin">
                          <aside class="notes">
                                
                            </aside>
                    </section>
                </section>
                <section>

                <section>
                        <h1>We Will Cover</h1>
                        <ul>
                            <li>What is continuous integration (CI)</li>
                            <li>How does it make our lives better here at Ai</li>
                            <li>Why Selenium and Fabric?</li>
                            <li>How we use it here</li>
                        </ul>
                </section>
                    
                    
                </section>
                <section>
                    <section>
                        <h2>What is continuous integration</h2>
                        <img src="img/ci.png" alt="Backup">
                        <p> Our definition: The parctice of merging your code base several times a day with the intent to be used in combination with automated unit tests.</p>
                    </section>
                    <section> <img src="img/jenkinsCIA.jpg" alt="Backup">
                        <h1>
                            <font color="red">How to implement CI</font>
                        </h1>   
              
                        <h2>In comes Jenkins to the rescue</h2>
                        <ul><li>What is jenkins
                                <ul><li> Jenkins is an award-winning application that monitors executions of repeated jobs, such as building a software project or jobs run by cron.</li></li></ul>
                        </ul>
                        <aside class='notes'>
                            <ul>
                                <li>simple= automatin framework for servers</li>
                            </ul>
                        </aside>
                    </section>
                </section>
                <section>
                    <section>
                        <h2>What Benefit does CI have?</h2>
                    
                    
                        <p class="fragment">Saves Time</p>
                        <ul class="fragment"><li>which saves you!</li>
                            <li><img src="img/fast.gif" width="400" height="400" alt="Backup"></li>
                        <aside class="notes">
                            No more running to the dev saying can u update stage or qa ASAP i have a client meetting or quick test to do
                        </aside>
                    </section>
                    <section>
                        <h2>Keeps Development Running Smooth</h2>
                        <p>and on target</p>
                        <img src="img/smooth.gif" alt="Sandy">
                        <img src='img/qabuild.png' alt= 'Qa build'>
                        <aside class="notes">
                            keeps env up to date so we can make sure the latest fixes are up for testing and clients
                        </aside>
                    </section>
                    <section>
                        <h2>Push Button Deployment!</h2>
                        <p>Soon to come not yet</p>
                        <img src="img/pushbutton.gif" alt="Spooning">
                        <aside class="notes">
                        we have the ablilty to do this now but we need some more error checking before we deploy to stage 

                        tech leads checkout new branches now
                         More for our staging envoriments as stage is not updated on the fly as it is client faceing for UAT  
                        </aside>
                    </section>
                    <section>
                        <h2>Push button code promotion</h2>
                        <p>Deploys</p>
                        <p></p>
                        <img src="img/launch.gif" alt="Cowboy">
                        <aside class="notes">
                            currently the way tha we use this for code promotion is that if all jiras are passed and the selenium suite passes the code is ready for the next stage of dev
                            change branching or update to a particlular branch is how we use this
                    </section>
                </section>
                <section>
                    <section>
                        <h2>Ai Automated QA</h2>
                        <img src="img/ai_auto.gif" alt="pumpkin">
                    </section>
                   
                  <section>
                        <h2>Ai Automated QA</h2>
                        <ul>
                            <li >Scripting</li>
                            <li>Link Finding</li>
                            <li>So much more</li>
                        </ul>
                    </section>
                    <section>
                        <h1>Scripting</h1>
                        <h2>Selenium and Fabric</h2>
                        <img src="img/sel.jpg" alt="Save All The Things!" >
                        <img src="img/fab.jpg" alt="Backup" height="356" width="356">
                    </section>
                     <section>
                        <h1>Scripting</h1>
                        <h2>Selenium</h2>
                        <ul><li class='fragment'><a href='https://addons.mozilla.org/en-us/firefox/addon/selenium-ide-button/'>IDE (FireFox Plugin)</a></li>
                            <li class='fragment'><a href='http://docs.seleniumhq.org/download/' >RemoteControl (cmd line)</a></li>
                            <li class='fragment'><a href='https://pypi.python.org/pypi/selenium'>Webdriver (Python library)</a></li></ul>
                    </section>
                    <section>
                        <h2>Selenium with webdriver<h2>
                            <h2>KNG Store locations test </h2>
                            <pre><code data-trim contenteditable>
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re
import xlrd
import pprint
from StoreLookup import StoreLookUp 

class Test (unittest.TestCase):
    def setUp(self):
        self.driver = webdriver.Firefox()
        self.driver.implicitly_wait(4)
        self.base_url = "http://kng.qa.aistg.com/"
        self.verificationErrors = []
        self.accept_next_alert = True



    
    def test_(self):        
        store_id = '0008'
        
        driver = self.driver
        lookup = StoreLookUp()
        values = lookup.getValues()  
        ips = values['ips']
        pprint.pprint(values['store_data'])
        for store_id,options in values['store_data'].items():
        
        #ipaddr = ips[2]
        #driver.get(self.base_url + "/?MY_IP=" + ipaddr)
            print ('opening url %s ' %store_id)
            driver.get(self.base_url + "/location/" + store_id)
            
            time.sleep(2)
            if options['Open 24hrs'] == 'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.open-24hrs"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Pay at the Pump'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.pay-at-the-pump"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Redbox'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.redbox"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Car Wash'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.car-wash"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['E85'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.e85"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Fresh Food'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.fresh-food"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Pizza'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.pizza"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Semi-Truck Fuel Island'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.semi-truck-fuel-island"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options['Diesel'] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.diesel"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            if options["F'Real"] == u'Yes':
                try: self.assertTrue(self.is_element_present(By.CSS_SELECTOR, "span.f-real"))
                except AssertionError as e: self.verificationErrors.append(str(e))
            #need to add freal and maybe resturant
        
        
    def is_element_present(self, how, what):
        try: self.driver.find_element(by=how, value=what)
        except NoSuchElementException, e: return False
        return True
    
    def is_alert_present(self):
        try: self.driver.switch_to_alert()
        except NoAlertPresentException, e: return False
        return True
    
    def close_alert_and_get_its_text(self):
        try:
            alert = self.driver.switch_to_alert()
            alert_text = alert.text
            if self.accept_next_alert:
                alert.accept()
            else:
                alert.dismiss()
            return alert_text
        finally: self.accept_next_alert = True
  
    def tearDown(self):
        self.driver.quit()
        self.assertEqual([], self.verificationErrors)
    
        

if __name__ == "__main__":
    unittest.main()
    

                            </code></pre>
                            <aside class='notes'>
                                <p>This uses an excel python xlrd to read from and excel and grab the data then verify depending on the values in the cells _------demo script in chrome</p>
                            </aside>

                        </section>
                    <section>
                        <h2>How does selenium get kicked off</h2>
                        <img src="img/dominos.gif" alt='domino'>
                        <p>Quality the cat waiting for the build to finish</p>
                        <img src='img/cat domino.gif' alt='cat domino'>
                        <p></p>
                        <p>In Jenkins we have a post build hook the kicks off the selenium job for the particular enviorment</p>
                    </section>
                    <section>
                        <h2>Scripting</h2>
                        <h2>Fabric</h2>
                        <h2>What is Fabric</h2>

                        <p>command-line tool for streamlining the use of SSH for application deployment or systems administration tasks.</p>
                        <h2>Specifically, Fabric is:</h2>
                        <ul><li>A tool that lets you execute arbitrary Python functions via the command line;</li>
                            <li>A library of subroutines (built on top of a lower-level library) to make executing shell commands over SSH easy and Pythonic.</li><ul>
                    </section>
                    <section>
                        <h1>From many to one</h1>
                        
                        <h2>Fab Code</h2>
                    <pre><code data-trim contenteditable>
def update(user, environment, local_branch, remote_branch):
    run('sudo su - %s -c \'cd ~/%s/ && git checkout  %s\'' % (user,environment,local_branch,)) 
    run('sudo su - %s -c \'cd ~/%s/ && git pull %s\'' % (user,env,remote_branch,)) 

def clone(user, path, gitpath):
    env.user = user 
    with cd(path):
        run('git init')
        run('git clone %s' % gitpath)
        
def updatewithsupport(user,directory, branch):
    #run('sudo su - %s -c \'cd ~/%s/ && git checkout %s && git pull\'' % (user,directory, branch,)) 
    run('sudo su - %s -c \'cd ~/%s && git pull --stat\''% (user,directory,))

def status(user,location):
    run('sudo su - %s -c \'cd ~/%s && git status\''% (user,location))

def clone_with_support(user, location, gitpath):
    run('sudo su - %s -c \'mkdir -p %s\''% location)
    run('sudo su - %s -c \'cd %s && git init && git clone %s\''% (user,location,gitpath,)) 

def branch(user, location):
    run('sudo su - %s -c \'cd %s && git branch\''% (user,location))

def log(user, directory, branch):
    run('sudo su - %s -c \'cd ~/%s && git log --pretty="%%H by %%cn when: %%cr What:  %%s" --since=1.days \''% (user,directory,))
    sys.exit("done")    
                    </code></pre>
                    <p>One file for all builds <a href="http://rincewind:8080/job/Zenith%20Dev/">here</a>.</p>
                    </section>
                    <aside class='notes'>
                    </aside>
                    <section>
                        <h1>Linkfinding</h1>
                        <img src=img/linksrisk.jpeg  alt='link checking sucks' height='400' width='600'>
                    </section>
                    <section>
                        <h1>Linkfinding</h1>
                        <p> <a href='http://rincewind:8080/job/LinkFinder/'>Linkfinder Jenkins</a></p>

                    </section>
                    <section>
                        <h1>Linkfinding</h1>
                        <h2>LinkFinder iOS</h2>
                        <a href="http://screencast.com/t/gqsiY7aShg">Link Checker</a>
                    </section>
                    </section>
                </section>
              
                <section>
                    <h2>At your desk research</h2>
                    <ul>
                        <li><a href="http://jenkins-ci.org/" target="_blank">Jenkins Homepage</a></li>
                        <li><a href="http://docs.fabfile.org/" target="_blank">Fabric</a></li>
                        <li><a href="http://home.snafu.de/tilman/xenulink.html" target="_blank">Windows Link Scraper</a></li>
                        <li><a href="http://peacockmedia.co.uk/integrity/" target="_blank">Mac Link Scraper</a></li>

                    </ul>
                </section>
                <section>
                    <h2>Questions?</h2>
                    <img src="img/questions.jpg" alt="inspector">
                </section>
            </div>

        </div>

        <script src="lib/js/head.min.js"></script>
        <script src="js/reveal.min.js"></script>

        <script>

            // Full list of configuration options available here:
            // https://github.com/hakimel/reveal.js#configuration
            Reveal.initialize({
                controls: true,
                progress: true,
                history: true,

                theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
                transition: Reveal.getQueryHash().transition || 'default', // default/cube/page/concave/zoom/linear/none

                // Optional libraries used to extend on reveal.js
                dependencies: [
                    { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
                    { src: 'plugin/markdown/showdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                    { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                    { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
                    { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
                ]
            });

        </script>

    </body>
</html>
